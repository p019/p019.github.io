(()=>{"use strict";var e={381:(e,t,n)=>{n.d(t,{Z:()=>x});var o=n(81),i=n.n(o),r=n(645),s=n.n(r),a=n(667),l=n.n(a),c=new URL(n(346),n.b),d=new URL(n(203),n.b),h=new URL(n(575),n.b),p=new URL(n(648),n.b),u=new URL(n(724),n.b),m=s()(i()),f=l()(c),b=l()(d),v=l()(h),g=l()(p),w=l()(u);m.push([e.id,`.volumeIconSvg{\n\tbackground-image: url(${f});\n}\n.volumeMuteIconSvg{\n\tbackground-image: url(${b});\n}\n.settingsIconSvg{\n\tbackground-image: url(${v});\n}\n.settingsCloseIconSvg{\n\tbackground-image: url(${g});\n}\n.plusIconSvg{\n\tbackground-image: url(${w});\n}`,""]);const x=m},834:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(81),i=n.n(o),r=n(645),s=n.n(r)()(i());s.push([e.id,":root{\n  --input-brd-color:var(--brdr-color);\n  --input-bg-color:var(--bg-color);\n}\ninput[type=range] {\n  -webkit-appearance: none;\n  margin-left: 15%;\n  width: 70%;\n}\ninput[type=range]:focus {\n  outline: none;\n}\ninput[type=range]::-webkit-slider-runnable-track {\n  width: 100%;\n  height: 14px;\n  cursor: pointer;\n  \n  border-left: ridge 4px var(--input-brd-color);\n  border-right: ridge 4px  var(--input-brd-color);\n  background: var(--input-bg-color);\n}\ninput[type=range]::-webkit-slider-thumb {\n  border: 9px groove  var(--input-brd-color);\n  height: 22px;\n  width: 22px;\n  border-radius: 7px;\n  background: var(--input-bg-color);\n  cursor: pointer;\n  -webkit-appearance: none;\n  margin-top: -3.6px;\n}\ninput[type=range]:focus::-webkit-slider-runnable-track {\n  background: var(--input-bg-color);\n  box-shadow: 0 0 5px  var(--input-brd-color);\n}\ninput[type=range]::-moz-range-track {\n  width: 100%;\n  height: 14px;\n  cursor: pointer;\n  animate: 0.2s;\n  box-shadow: 0px 0px 0px #000000, 0px 0px 0px #0d0d0d;\n  background: var(--input-bg-color);\n  border-radius: 25px;\n  border: 0px solid #000101;\n}\ninput[type=range]::-moz-range-thumb {\n  box-shadow: 0px 0px 0px #000000, 0px 0px 0px #0d0d0d;\n  border: 0px solid #000000;\n  height: 20px;\n  width: 39px;\n  border-radius: 7px;\n  background: #65001c;\n  cursor: pointer;\n}\ninput[type=range]::-ms-track {\n  width: 100%;\n  height: 14px;\n  cursor: pointer;\n  animate: 0.2s;\n  background: transparent;\n  border-color: transparent;\n  border-width: 39px 0;\n  color: transparent;\n}\ninput[type=range]::-ms-fill-lower {\n  background: var(--input-bg-color);\n  border: 0px solid #000101;\n  border-radius: 50px;\n  box-shadow: 0px 0px 0px #000000, 0px 0px 0px #0d0d0d;\n}\ninput[type=range]::-ms-fill-upper {\n  background: var(--input-bg-color);\n  border: 0px solid #000101;\n  border-radius: 50px;\n  box-shadow: 0px 0px 0px #000000, 0px 0px 0px #0d0d0d;\n}\ninput[type=range]::-ms-thumb {\n  box-shadow: 0px 0px 0px #000000, 0px 0px 0px #0d0d0d;\n  border: 0px solid #000000;\n  height: 20px;\n  width: 39px;\n  border-radius: 7px;\n  background: #65001c;\n  cursor: pointer;\n}\ninput[type=range]:focus::-ms-fill-lower {\n  background: var(--input-bg-color);\n}\ninput[type=range]:focus::-ms-fill-upper {\n  background: var(--input-bg-color);\n}",""]);const a=s},553:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(81),i=n.n(o),r=n(645),s=n.n(r)()(i());s.push([e.id,"@media (orientation: portrait){\n    body{\n        width: 100%;\n        height: 100%;\n        overflow: hidden;\n    }\n    #info{\n        position: absolute;\n        top:0;\n        left: calc((100vw - 50dvh)/2 + 7px);\n        background: transparent;\n        border: none;\n        box-shadow: none;\n        transform-origin: top left;\n    }\n    .smallInfo{\n        transform: scale(0.6);\n        opacity:0.2;\n        color: white;\n    }\n    .hideNext > :nth-child(1){\n        display: none;\n    }\n    .infoBlock{\n        text-shadow: 0 0 3px black;\n        font-size: 40px;\n    }\n    .infoBlockInner{\n        font-size: 50px;\n    }\n    #main{\n        left: 0;\n        width: auto;\n   \n    }\n    #field{\n        left: calc((100vw - 50dvh)/2);\n        width: 50dvh;\n        height: 100dvh;\n        box-sizing:border-box;\n     \n    }\n    .settingsOpen{\n        left: 0;\n        top: 0;\n        width: 100dvw;\n        box-sizing:border-box;\n        overflow-x: hidden;\n        overflow-y: scroll;\n    }\n    .hide{\n        display: none;\n    }\n    .paletteEditor{\n        width: 100vw;\n        box-sizing: border-box;\n        right: 0;\n    }\n    #name{display: none;}\n}\n@media (hover:none){\n    @keyframes fadeinout {\n        0%{opacity: 0;}\n        50%{opacity: 0.5;}\n        100%{opacity: 0;}        \n    }\n\n    #controlsText::after{\n        content: 'swipe to control';\n    }\n    #startText::after{\n        content: 'tap to start';\n    }\n    #restart{\n        position: absolute;\n        font-size: 7dvh;\n        font-family: 'Teko';\n        color:white;\n        width: 100dvw;\n        text-align: center;\n        bottom: 10dvh;\n        animation-name: fadeinout;\n        animation-iteration-count: infinite;\n        animation-duration: 2s;\n    }\n    #restart::after{\n        content: 'tap to restart';\n    }\n\n}",""]);const a=s},850:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(81),i=n.n(o),r=n(645),s=n.n(r)()(i());s.push([e.id,".paletteEditor{\n    top:20vh;\n    right:30px;\n    position: absolute;\n    width: 360px;\n    height: 280px;\n    background: rgba(0,0,0,0.4);\n    border-style: groove;\n    border-width: 8px;\n    border-color: var(--brdr-color);\n    border-radius: 7px;\n    box-shadow: 0 0 7px black;\n    backdrop-filter: blur(3px);\n    font-family: 'Teko';\n    overflow: hidden;\n}\n.paletteEditorTitle{\n    color: var(--main-text-color);\n    font-size: 120%;\n    margin-left: 5px;\n}\n.edpalette{\n    width: 95%;\n    height: 50px;\n    background-size: cover;\n    position: relative;\n    display: inline-block;  \n    margin-left: 2.5%;\n    margin-top: 10px;\n}\n.edpaletteColor{\n    height: 100%;\n    width: 20px;\n    flex-grow: 1;\n}\n.edcolorSelected{\n    border: ridge 4px darkgray;\n    box-sizing: border-box;\n    transform: scale(1.2,1.2);\n    box-shadow: 0 0 5px rgba(0,0,0,0.5);\n}\n.edpaletteColor:hover{\n    transform: scale(1.2,1.2);\n    box-shadow: 0 0 5px rgba(0,0,0,0.5);\n    z-index: 2;\n}\n.colorRemoveButton{\n    width: 100%;\n    position: absolute;\n    top: 0;\n    font-size: 90%;\n    font-family: 'Teko';\n    color: var(--main-text-color);\n    text-shadow: 0 0 3px black;\n    content: 'remove';\n    text-align: center;\n    display: none;\n}\n.edpaletteColor:hover .colorRemoveButton{\n    display: block;\n}\n.colorRemoveButton:hover{\n    color: rgb(200, 0, 0);\n}\n.edpaletteColorWrapper{\n    position: relative;\n    display: flex;\n    flex-direction: row;\n    width: 100%;\n    height: 100%;\n    flex-wrap: nowrap;\n    align-items: stretch;\n}\n.closeIcon{position:absolute;right: -4px;top:0px;width: 20px;height: 20px;background-repeat: no-repeat;}\n.closeIcon:hover{filter: brightness(130%);}\n\n.paletteEditor input[type=range]:focus::-webkit-slider-runnable-track {\n    background: red;\n    box-shadow: 0 0 5px  var(--input-brd-color);\n}\n.addColorButton{\n    position:relative;\n    display:inline-block;\n    left: 40%;\n    width:20%;\n    background-size: cover;\n    margin-bottom: 10px;\n    margin-top: 5px;\n}\n.savePaletteButton{\n    width: 100%;\n    position: absolute;\n    bottom: 0;\n\n}\n.hexInput{\n    position: relative;\n    width: 30%;\n    left: 35%;\n    background-color: var(--brdr-color);\n    font-family: 'Teko';\n    font-size: 150%;\n    height: 20px;\n    margin-top: 5px;\n    text-align: center;\n}\n.hexInputLabel{\n    margin-top: 7px;\n    position: absolute;\n    color:var(--main-text-color);\n    font-family: 'Teko',sans-serif;\n    font-size: 100%;\n    width: 30%;\n    display: inline-block;\n    text-align: right\n}\n\n",""]);const a=s},161:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(81),i=n.n(o),r=n(645),s=n.n(r)()(i());s.push([e.id,"#paletteBlock{\n    margin-left: 15%;\n    width: 70%;\n    overflow-y: scroll;\n    overflow-x: hidden;\n    height: 14vh;\n}\n.palette{\n    width: 70%;\n    height: 4vh;\n    background-size: cover;\n    position: relative;\n    display: inline-block;  \n    margin-left: 5%;\n}\n.palette:hover{\n    box-shadow: 0 0 5px rgba(255, 255, 255, 0.489);\n    transform: scale(1.05,1.05);\n    cursor: pointer;\n}\n.paletteOptions{\n    top: 0;\n    position: absolute;\n    display: none;\n}\n.palette:hover .paletteOptions{\n    display: block;\n    font-size: 80%;\n    font-family: 'teko';\n    color:var(--main-text-color);\n    margin-left: 100%;\n    position: absolute;\n}\n\n.paletteSelected{\n    transform: scale(1.05,1.05);\n    box-sizing: border-box;\n}\n.paletteSelected::after{\n    position: absolute;\n    top: 0;\n    font-size: 140%;\n    font-family: 'Teko';\n    color: var(--main-text-color);\n    text-shadow: 0 0 3px black;\n    mix-blend-mode:luminosity;\n    content: 'selected';\n}\n.paletteOptions span{\n    margin-left: 4px;\n}\n.paletteOptions span:first-child:hover{\n    color: white;\n}\n.paletteOptions span:last-child:hover{\n    color: rgb(200, 0, 0);\n}\nbutton{\n    background-color: var(--bg-color);\n    font-family: 'teko';\n    border-radius: 2px;\n    width: 100%;\n}\nbutton:hover{\n    cursor: pointer;\n    color: var(--main-text-color);\n}\n.paletteColor{\n    height: 100%;\n    width: 20px;\n    flex-grow: 1;\n}\n.paletteColorWrapper{\n    position: relative;\n    display: flex;\n    flex-direction: row;\n    width: 100%;\n    height: 100%;\n    flex-wrap: nowrap;\n    align-items: stretch;\n}\n#addButton{\n    position: relative;\n    bottom: 0;\n}",""]);const a=s},862:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(81),i=n.n(o),r=n(645),s=n.n(r)()(i());s.push([e.id,".scroll::-webkit-scrollbar-track\n{\n\t-webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3);\n\tbackground-color:var(--bg-color);\n    border-top: ridge 4px var(--brdr-color);\n    border-bottom: ridge 4px  var(--brdr-color);\n}\n.scroll::-webkit-scrollbar\n{   \n\twidth: 16px;\n}\n.scroll::-webkit-scrollbar-thumb\n{   \n\tbackground-color: var(--bg-color);\n\tborder: 8px groove var(--brdr-color);\n    border-radius: 4px;\n}\n",""]);const a=s},772:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(81),i=n.n(o),r=n(645),s=n.n(r)()(i());s.push([e.id,"html {\n       --main-text-color: darkgray;\n       --bg-color:rgb(60,60,60);\n       --brdr-color:rgba(150,150,150,0.5);\n     }\n\n*{margin: 0;user-select: none}\n\nbody{height: 100vh;overflow: hidden;}\n\n.bodyBlue{background: radial-gradient(circle,var(--bg-color),black);}\n.bodyRed{background: radial-gradient(circle,rgb(120,35,35),black);}\n\n#start{position: absolute;color: var(--main-text-color);top:30%;left:35%;font-family: 'Teko', sans-serif;\n      font-size: 30px;text-shadow: 0 0 5px black;transition-duration: .4s;width: 30%;text-align: center;}\n\n.infoBlock{position: relative;height: 20%;font-family: 'Teko', sans-serif;font-size: 25px;left:5px;width: 94%;}\n           \n.infoBlockInner{position: absolute;width: 100%;height: 70%;text-align: center;font-size: 200%;\n                display: flex;justify-content: center;align-items: center;}\n\n#next{position: relative;width: 18vh;height: 9vh}\n\n.nextBlock{position: absolute;width:25%;height: 50%;\n       border:groove 7px var(--brdr-color);\n       box-sizing: border-box;border-radius: 7px;\n       box-shadow: 0 0 4px black;z-index: 0;\n       position: absolute;transition-duration: .07s;transition-timing-function: linear;opacity: 1}\n\n.rowLine{position: absolute;background: rgba(250,250,250,0.95);box-shadow: 0 0 10px white;transition: all .15s;width: 100%;height: 3%;}\n\n.rowLineEnd{transform: scale(1,0);opacity: 0}\n\n#main{position: relative;width: 80dvh;margin: auto;left: 5%;height: 90dvh;top:2%;}\n\n#name{position: absolute;left: 20px;top:-20px;}\n.name{color:rgba(50,50,100,0.7);position: absolute;left: 15px;top:15px;font-family: 'Teko', sans-serif;\n       font-size: 60px;text-shadow: 0 0 3px black}\n\n#field{position: absolute;width:45vh;height:100%;background: rgba(0,0,0,0.4);margin: auto;\n       border-style: groove;border-width: 8px;border-color: var(--brdr-color);\n       border-radius: 7px;box-shadow: 0 0 7px black;overflow: hidden;}\n\n#info{position: absolute;width: 25vh;height: 100%;background: rgba(0,0,0,0.4);left: 65%;color:var(--main-text-color);\n       border-style: groove;border-width: 8px;border-color: var(--brdr-color);border-radius: 7px;box-shadow: 0 0 7px black;}\n\n#settings{position: absolute;right:15px;top:2%;border-radius: 7px;border-style: groove;\n\t    border-color: var(--brdr-color);}\n       \n.settingsOpen{background: rgba(0,0,0,0.4);width: 40vh;height: 90vh;\n                border-width: 8px;box-shadow: 0 0 7px black;backdrop-filter: blur(3px);\n                overflow-y: auto;overflow-x: hidden;\n              }\n\n.settingsOpen #settingsIcon{margin-left: calc(100% - 18px)}\n\n.settingsClose{width: 25px;height: 25px;border-width: 0px;}\n\n#settingsIcon{position:relative;right: 0px;top:0px;width: 20px;height: 20px;background-repeat: no-repeat;}\n#settingsIcon:hover{filter: brightness(130%);}\n\n#soundIcon{position: absolute;right: 55px;top:calc(2% - 2.5px);color:var(--main-text-color);font-size: 18px;\n           transition: all .1s;width: 27px;height: 25px;background-size: contain;background-repeat: no-repeat;}\n#soundIcon:hover{filter: brightness(130%);}\n       \n.a{left:18px;top:18px;color:rgba(50,150,100,0.7);text-shadow: 0 0 10px rgba(100,100,200,0.3);}\n.b{left:21px;top:21px;color:rgba(150,50,100,0.7);}\n.c{left:24px;top:24px;color:rgba(50,50,150,0.7);}\n.d{left:27px;top:27px}\n\n.block{position: absolute;\n       border:groove 7px var(--brdr-color);\n       box-sizing: border-box;border-radius: 7px;\n       box-shadow: 0 0 4px black;\n       transition-duration: .07s;transition-timing-function: linear;opacity: 1;\n       will-change: top,left;}\n\n.main{width: 10%;height: 5%;}\n\n.next{position: absolute;width:25%;height: 50%;}\n\n.dark{box-shadow: 0 0 2px rgba(0,0,0,0.5);filter: brightness(0.95);border:ridge 7px var(--brdr-color);} \n\n.settingTitle{\n       font-family: 'Teko', sans-serif;color: var(--main-text-color);\n       padding-left: 10%;\n       font-size: 120%;\n       padding-bottom: 4%;\n       padding-top: 10%;\n}\n\n#volumeBlock{\n      position: relative;\n      width: 100%;\n} \n.inputLabel{\n       position: absolute;\n       color:var(--main-text-color);\n       font-family: 'Teko',sans-serif;\n       font-size: 100%;\n       width: 5vh;\n       display: inline-block;\n       text-align: right\n}\ninput + .inputLabel{\n       text-align: left;\n       padding-left: 1vh;\n}\n.ghostBlock{\n       opacity: 0.3;\n       background-color: transparent;\n}\n#controlsText::after{\n       content: 'arrows or WASD to control';\n}\n#startText::after{\n       content: 'press enter to start';\n}",""]);const a=s},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",o=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),o&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),o&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,o,i,r){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(o)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(s[l]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);o&&s[d[0]]||(void 0!==r&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=r),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),i&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=i):d[4]="".concat(i)),t.push(d))}},t}},667:e=>{e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},81:e=>{e.exports=function(e){return e[1]}},379:e=>{var t=[];function n(e){for(var n=-1,o=0;o<t.length;o++)if(t[o].identifier===e){n=o;break}return n}function o(e,o){for(var r={},s=[],a=0;a<e.length;a++){var l=e[a],c=o.base?l[0]+o.base:l[0],d=r[c]||0,h="".concat(c," ").concat(d);r[c]=d+1;var p=n(h),u={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==p)t[p].references++,t[p].updater(u);else{var m=i(u,o);o.byIndex=a,t.splice(a,0,{identifier:h,updater:m,references:1})}s.push(h)}return s}function i(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){var r=o(e=e||[],i=i||{});return function(e){e=e||[];for(var s=0;s<r.length;s++){var a=n(r[s]);t[a].references--}for(var l=o(e,i),c=0;c<r.length;c++){var d=n(r[c]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}r=l}}},569:e=>{var t={};e.exports=function(e,n){var o=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(n)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var o="";n.supports&&(o+="@supports (".concat(n.supports,") {")),n.media&&(o+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(o+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),o+=n.css,i&&(o+="}"),n.media&&(o+="}"),n.supports&&(o+="}");var r=n.sourceMap;r&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleTagTransform(o,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},575:e=>{e.exports="data:image/svg+xml,%3Csvg  xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 512 512%27 %3E%3Cpath fill=%27darkgray%27 d=%27M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z%27 %3E%3C/path%3E%3C/svg%3E"},724:e=>{e.exports='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 448 512"%3E%3Cpath fill="darkgray" d="M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z"%3E%3C/path%3E%3C/svg%3E'},648:e=>{e.exports="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 352 512%27%3E%3Cpath fill=%27darkgray%27 d=%27M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z%27%3E%3C/path%3E%3C/svg%3E"},346:e=>{e.exports="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 480 512%27%3E%3Cpath fill=%27darkgray%27 d=%27M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zM480 256c0-63.53-32.06-121.94-85.77-156.24-11.19-7.14-26.03-3.82-33.12 7.46s-3.78 26.21 7.41 33.36C408.27 165.97 432 209.11 432 256s-23.73 90.03-63.48 115.42c-11.19 7.14-14.5 22.07-7.41 33.36 6.51 10.36 21.12 15.14 33.12 7.46C447.94 377.94 480 319.53 480 256zm-141.77-76.87c-11.58-6.33-26.19-2.16-32.61 9.45-6.39 11.61-2.16 26.2 9.45 32.61C327.98 228.28 336 241.63 336 256c0 14.38-8.02 27.72-20.92 34.81-11.61 6.41-15.84 21-9.45 32.61 6.43 11.66 21.05 15.8 32.61 9.45 28.23-15.55 45.77-45 45.77-76.88s-17.54-61.32-45.78-76.86z%27%3E%3C/path%3E%3C/svg%3E"},203:e=>{e.exports="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 512 512%27%3E%3Cpath fill=%27darkgray%27 d=%27M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zM461.64 256l45.64-45.64c6.3-6.3 6.3-16.52 0-22.82l-22.82-22.82c-6.3-6.3-16.52-6.3-22.82 0L416 210.36l-45.64-45.64c-6.3-6.3-16.52-6.3-22.82 0l-22.82 22.82c-6.3 6.3-6.3 16.52 0 22.82L370.36 256l-45.63 45.63c-6.3 6.3-6.3 16.52 0 22.82l22.82 22.82c6.3 6.3 16.52 6.3 22.82 0L416 301.64l45.64 45.64c6.3 6.3 16.52 6.3 22.82 0l22.82-22.82c6.3-6.3 6.3-16.52 0-22.82L461.64 256z%27%3E%3C/path%3E%3C/svg%3E"},958:(e,t,n)=>{e.exports=n.p+"c1e08cc4f0e7a68f6e5b.mp3"},178:(e,t,n)=>{e.exports=n.p+"a23c54c80dc7dbb3a289.mp3"},878:(e,t,n)=>{e.exports=n.p+"5ca9d65b7d73b6aafa28.mp3"},757:(e,t,n)=>{e.exports=n.p+"8fa306ac470d295cdf7f.mp3"},74:(e,t,n)=>{e.exports=n.p+"08612a6166dc742c1b66.mp3"},249:(e,t,n)=>{e.exports=n.p+"4b791475fa15736d533d.mp3"},319:(e,t,n)=>{e.exports=n.p+"6de60ae1c07e253d6bb5.mp3"},627:(e,t,n)=>{e.exports=n.p+"953f31c8292ff4603731.mp3"},456:(e,t,n)=>{e.exports=n.p+"527ffece46049f03b00b.mp3"},908:(e,t,n)=>{e.exports=n.p+"c7eba2b7cef9b1ef36ad.mp3"}},t={};function n(o){var i=t[o];if(void 0!==i)return i.exports;var r=t[o]={id:o,exports:{}};return e[o](r,r.exports,n),r.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.p="/Tet/",n.b=document.baseURI||self.location.href,n.nc=void 0,(()=>{var e=n(379),t=n.n(e),o=n(795),i=n.n(o),r=n(569),s=n.n(r),a=n(565),l=n.n(a),c=n(216),d=n.n(c),h=n(589),p=n.n(h),u=n(772),m={};m.styleTagTransform=p(),m.setAttributes=l(),m.insert=s().bind(null,"head"),m.domAPI=i(),m.insertStyleElement=d(),t()(u.Z,m),u.Z&&u.Z.locals&&u.Z.locals;var f=n(834),b={};b.styleTagTransform=p(),b.setAttributes=l(),b.insert=s().bind(null,"head"),b.domAPI=i(),b.insertStyleElement=d(),t()(f.Z,b),f.Z&&f.Z.locals&&f.Z.locals;var v=n(381),g={};g.styleTagTransform=p(),g.setAttributes=l(),g.insert=s().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=d(),t()(v.Z,g),v.Z&&v.Z.locals&&v.Z.locals;var w=n(161),x={};x.styleTagTransform=p(),x.setAttributes=l(),x.insert=s().bind(null,"head"),x.domAPI=i(),x.insertStyleElement=d(),t()(w.Z,x),w.Z&&w.Z.locals&&w.Z.locals;var y=n(862),E={};E.styleTagTransform=p(),E.setAttributes=l(),E.insert=s().bind(null,"head"),E.domAPI=i(),E.insertStyleElement=d(),t()(y.Z,E),y.Z&&y.Z.locals&&y.Z.locals;var k=n(850),S={};S.styleTagTransform=p(),S.setAttributes=l(),S.insert=s().bind(null,"head"),S.domAPI=i(),S.insertStyleElement=d(),t()(k.Z,S),k.Z&&k.Z.locals&&k.Z.locals;var C=n(553),T={};function L(e,t=0,n=0){return e.map((e=>{const o=Object.assign({},e);return o.x+=t,o.y+=n,o}))}function I(e,t=0,n=0){let o=!0;return e.forEach((e=>{(e.x+t>=10||e.x+t<0||e.y+n>=20||e.y+n>=0&&this.field[e.y+n][e.x+t])&&(o=!1)})),o}T.styleTagTransform=p(),T.setAttributes=l(),T.insert=s().bind(null,"head"),T.domAPI=i(),T.insertStyleElement=d(),t()(C.Z,T),C.Z&&C.Z.locals&&C.Z.locals;const P=[[0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0],[0,0,0,0,1,1,1,1,0],[0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0],[0,0,0,0,0,1,1,1,1],[0,0,0,1,0,0,1,1,1],[0,0,0,1,1,0,0,1,1],[0,0,0,1,1,1,0,1,0]];function M(e,t){let n=Math.sqrt(t);return[e%n,Math.floor(e/n)]}function A(e,t,n,o=!1){let i=document.createElement("div"),r=o?"next":"main";return i.classList.add("block"),i.classList.add(r),{elem:i,x:e,y:t,color:n}}function B(e,t=!1){const n=t?0:3;let o=[],i=P[e.n].length;for(let r=0;r<i;r++)if(P[e.n][r]){let[s,a]=M(r,i),l={...A(s+n,a-n,e.color,t),i:r,n:e};o.push(l)}return o}function U(e,t){const n=e=>localStorage.setItem(t,JSON.stringify(e)),o=localStorage.getItem(t);if(o){const t=JSON.parse(o);let n;for(n in t)e[n]=t[n];for(n in e)!t.hasOwnProperty(n)&&delete e[n]}else n(e);return new Proxy(e,{set:(e,t,o)=>(e[t]=o,n(e),!0),deleteProperty:(e,t)=>(delete e[t],n(e),!0)})}const z=U({currentPalette:"default",volumeBalance:.5,volume:.5,isNotMuted:1,backgroundColor:0,ghostEnabled:1},"tetConfig");function $(e){return new Proxy(e,{get(e,t){const n=e.length;return t>=n?e[t%n]:e[t]}})}const V={default:[[255,89,176],[54,56,227],[172,224,52],[69,247,203],[252,187,81]],classic:[[0,255,255],[255,255,0],[128,0,128],[0,255,0],[255,0,0],[0,0,255],[255,127,0],[127,127,127]],standart:[[0,255,255],[0,0,255],[240,163,8],[240,240,8],[8,240,8],[163,8,240],[240,8,8]],pastel:[[201,203,163],[255,225,168],[226,109,92],[114,61,70],[71,45,48]],darkBlue:[[50,50,60],[30,30,40],[20,20,30],[10,10,20],[5,5,10]]},O=new class{constructor(){this.palettes=U(V,"paletteList");for(let e in this.palettes)this.palettes[e]=$(this.palettes[e])}add(e){this.palettes[crypto.randomUUID()]=$(e)}remove(e){delete this.palettes[e]}get(e){return this.palettes[e]||V.default}replace(e,t){this.palettes[e]=$(t)}};var q,Z,R,H=function(e,t,n,o){if("a"===n&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?o:"a"===n?o.call(e):o?o.value:t.get(e)};Z=new WeakMap,q=new WeakSet,R=function(){let e=[],t=[0,1,2,3,4,5,6];for(let n=0;n<7;n++){const n=Math.floor(Math.random()*t.length),o=Math.floor(Math.random()*O.get(z.currentPalette).length);e.push({n:t[n],color:o}),t.splice(n,1)}!function(e,t,n,o,i){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===o?i.call(e,n):i?i.value=n:t.set(e,n)}(this,Z,e,"f")};const D=new class{constructor(){q.add(this),Z.set(this,[])}create(){return H(this,q,"m",R).call(this),this}get(){return H(this,Z,"f").shift()}getNext(){return 0==H(this,Z,"f").length&&H(this,q,"m",R).call(this),H(this,Z,"f")[0]}};function N(e,t){const n=O.get(z.currentPalette)[e[0].color];requestAnimationFrame((()=>{e.forEach((e=>{e.elem.style.background=`radial-gradient(rgb(${n[0]+30},${n[1]+30},${n[2]+30}),rgb(${n[0]},${n[1]},${n[2]}))`,e.elem.style.boxShadow=`0 0 8px rgb(${n[0]},${n[1]},${n[2]})`,t.appendChild(e.elem)}))}))}function W(e){requestAnimationFrame((()=>{e.forEach((e=>{e.elem.style.left=10*e.x+"%",e.elem.style.top=5*e.y+"%"}))}))}function j(){this.alive=B(D.get()),N(this.alive,Pe.htmlElem),W(this.alive)}const F={row1:["fx",new URL(n(456),n.b).href],row2:["fx",new URL(n(249),n.b).href],row3:["fx",new URL(n(319),n.b).href],row4:["fx",new URL(n(627),n.b).href],row5:["fx",new URL(n(908),n.b).href],hit:["fx",new URL(n(178),n.b).href],music:["music",new URL(n(878),n.b).href],move:["fx",new URL(n(757),n.b).href],air:["fx",new URL(n(958),n.b).href],end:["fx",new URL(n(74),n.b).href]};class K{static load(e){const t=new Audio;return t.src=e,t}constructor(e){this.isInited=!1,this.audio={},this.urlList=e,this.preload()}initAudio(){if(this.isInited)return;const e=new AudioContext,t=e.createGain(),n=e.createGain(),o=e.createGain();let i;for(i in t.connect(o),n.connect(o),o.connect(e.destination),this.audio){const o=e.createMediaElementSource(this.audio[i]),r="music"==this.audio[i].type?n:t;o.connect(r)}function r(t){return n=>{t.gain.linearRampToValueAtTime(function(e){return Math.max(Math.exp(4*e)/55-.02,0)}(n),e.currentTime+.1)}}this.setMusicVolume=r(n),this.setFXVolume=r(t),this.setSumVolume=r(o),this.isInited=!0}preload(){let e;for(e in this.urlList)this.audio[e]=Object.assign(K.load(this.urlList[e][1]),{type:this.urlList[e][0]})}play(e,t=void 0){this.audio[e].currentTime=0,this.audio[e].play(),t&&setTimeout((()=>{this.audio[e].pause()}),t)}stop(e){this.audio[e].currentTime=0,this.audio[e].pause()}pause(e){this.audio[e].pause()}resume(e){this.audio[e].play()}repeatPlay(e){const t=this.play.bind(this);t(e),this.audio[e].addEventListener("ended",(()=>t(e)))}setSpeed(e,t){this.audio[e].playbackRate=t}setMusicVolume(e){}setFXVolume(e){}setSumVolume(e){}}const G=new K(F);var X,Y,_,J,Q,ee=function(e,t,n,o){if("a"===n&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?o:"a"===n?o.call(e):o?o.value:t.get(e)},te=function(e,t,n,o,i){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?i.call(e,n):i?i.value=n:t.set(e,n),n};Y=new WeakMap,_=new WeakMap,J=new WeakMap,X=new WeakSet,Q=function e(){te(this,Y,setTimeout(ee(this,X,"m",e).bind(this),ee(this,_,"f").call(this)),"f"),ee(this,J,"f").call(this)};const ne=new class{constructor(){X.add(this),Y.set(this,void 0),_.set(this,void 0),J.set(this,void 0)}start(){ee(this,Y,"f")&&this.stop(),te(this,Y,setTimeout(ee(this,X,"m",Q).bind(this),ee(this,_,"f").call(this)),"f")}stop(){clearTimeout(ee(this,Y,"f")),te(this,Y,0,"f")}forceTimeout(e,t=void 0){this.stop(),te(this,Y,setTimeout((()=>{ee(this,X,"m",Q).call(this),t&&t()}),e),"f")}setTickGettingFunction(e){te(this,_,e,"f")}setCallback(e){te(this,J,e,"f")}};var oe,ie,re=function(e,t,n,o){if("a"===n&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?o:"a"===n?o.call(e):o?o.value:t.get(e)};oe=new WeakSet,ie=function(e){const t=this.keyboardEvents;return function(n){t[e][n.code]&&t[e][n.code].enabled&&(t[e][n.code].callback(),n.preventDefault())}};const se=new class{constructor(){oe.add(this),this.keyboardEvents={up:{},down:{}}}init(){const e=re(this,oe,"m",ie).call(this,"down"),t=re(this,oe,"m",ie).call(this,"up");document.addEventListener("keydown",e),document.addEventListener("keyup",t)}register(e){e.forEach((e=>{this.keyboardEvents[e[0]][e[1]]={enabled:!0,callback:e[2]}}))}unRegister(e){e.forEach((e=>{delete this.keyboardEvents[e[0]][e[1]]}))}setEnability(e,t){e.forEach((e=>{this.keyboardEvents.down[e]&&(this.keyboardEvents.down[e].enabled=t),this.keyboardEvents.up[e]&&(this.keyboardEvents.up[e].enabled=t)}))}};function ae(){let e=0;for(se.setEnability(["ArrowDown","KeyS"],!1);this.isValidPosition(this.alive,0,e);)e++;this.alive.forEach((t=>{t.elem.style.transitionDuration=.025*e+"s",t.elem.style.transitionTimingFunction="cubic-bezier(.38,.07,.71,.67)"})),this.alive=this.changePosition(this.alive,0,e-1),ne.forceTimeout(25*e+50,(()=>{se.setEnability(["ArrowDown","KeyS"],!0)})),W(this.alive),G.play("air",25*e)}function le(){G.play("hit"),this.alive.forEach((e=>{if(e.y>=0){let t=O.get(z.currentPalette)[e.color];e.elem.style.background=`rgb(${t[0]},${t[1]},${t[2]})`,e.elem.style.boxShadow="none",this.field[e.y][e.x]=e}else this.isOverflowed=!0}))}const ce={16:[3,7,11,15,2,6,10,14,1,5,9,13,0,4,8,12],9:[2,5,8,1,4,7,0,3,6]};function de(){let e=this.alive.map((e=>Object.assign({},e))),t=!1;for(;!t;){e.forEach((e=>{const t=9==P[e.n.n].length?"9":"16";let n=ce[t][e.i],[o,i]=M(n,P[e.n.n].length),[r,s]=M(e.i,P[e.n.n].length);e.x=o+(e.x-r),e.y=i+(e.y-s),e.i=n}));for(let t=0;t<2;t++){if(this.isValidPosition(e,t,0)){n(this,this.changePosition(e,t,0));break}if(t>0&&this.isValidPosition(e,-t,0)){n(this,this.changePosition(e,-t,0));break}}}function n(e,n){t=!0,e.alive=n,W(e.alive)}}function he(e){e.style.transition="color ease 0.15s",e.style.color="white",setTimeout((()=>e.style.color=""),150)}const pe=document.querySelector("#record"),ue={record:0,read(){this.record=parseInt(window.localStorage.getItem("record")||"0")},write(e){e>this.record&&(this.record=e,window.localStorage.setItem("record",this.record.toString()),this.setValue(),he(pe))},setValue(){pe.innerText=this.record.toString()}};var me,fe,be,ve=function(e,t,n,o){if("a"===n&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?o:"a"===n?o.call(e):o?o.value:t.get(e)};fe=new WeakMap,me=new WeakSet,be=function(){ve(this,fe,"f").innerText=this.current.toString()};const ge=new class{constructor(){me.add(this),fe.set(this,void 0),function(e,t,n,o,i){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===o?i.call(e,n):i?i.value=n:t.set(e,n)}(this,fe,document.querySelector("#level"),"f")}newCount(){this.current=1,ve(this,me,"m",be).call(this)}increment(){this.current++,ve(this,me,"m",be).call(this),he(ve(this,fe,"f"))}},we=document.querySelector("#score"),xe={current:0,lineCount:0,new(){this.current=0,this.lineCount=0,this.display()},add(e){this.current+=Math.round(100*e**1.4*(1+(ge.current-1)/10)),this.display(),e&&he(we)},display(){we.innerText=this.current.toString()}};function ye(e){let t=document.createElement("div");t.className="rowLine",t.style.top=5*e+1+"%",Pe.htmlElem.appendChild(t),setTimeout((()=>{t.className="rowLine rowLineEnd",setTimeout((()=>t.remove()),150)}),30)}function Ee(e,t,n){n[e].forEach((e=>{e.elem.remove()})),n.splice(e,1),n.unshift(new Array(10)),function(e,t){t.forEach((t=>{t.forEach(((t,n)=>{t.elem.style.transition=`top ${2*e/10}s ease-in ${(t.x+n)/50}s`}))}))}(t,n),function(e){e.forEach(((e,t)=>{e.forEach((e=>{e.elem.style.top=5*t+"%"}))}))}(n)}function ke(){let e=0;for(let t=0;t<20;t++){let n=0;for(let e=0;e<10;e++)this.field[t][e]&&n++;10==n&&(e++,Ee(t,e,this.field),ye(t))}!function(e){xe.add(e),ue.write(xe.current)}(e),e&&G.play("row5"),xe.lineCount+=e,xe.lineCount>10*ge.current&&ge.increment()}const Se=new class{constructor(){this.visibility=1}init(e,t,n){return this.getAlive=e,this.check=t,this.ghost=function(e){return Array(4).fill(void 0).map((()=>{var t=document.createElement("div");return t.classList.add("ghostBlock","block","main"),requestAnimationFrame((()=>{e.appendChild(t)})),t}))}(n),this.setAppearance(this.visibility),this}update(){for(var e=this.getAlive(),t=0;this.check(e,0,t);)t++;requestAnimationFrame((()=>{this.ghost.forEach(((n,o)=>{n.style.left=10*e[o].x+"%",n.style.top=5*(e[o].y+t-1)+"%"}))}))}setAppearance(e){this.ghost&&(this.ghost.forEach((t=>{t.style.display=e?"block":"none"})),this.getAlive().length&&this.update()),this.visibility=e}};var Ce,Te,Le,Ie=function(e,t,n,o){if("a"===n&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?o:"a"===n?o.call(e):o?o.value:t.get(e)};class Pe{constructor(){this.field=[[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]],this.alive=[],this.isOverflowed=!1,this.doStepDown=()=>Ie(this,Te,"f").call(this,0,1),this.rotateTetromino=()=>{de.bind(this)(),this.updateGhost()},this.emitTetromino=()=>{j.bind(this)(),this.updateGhost()},this.placeTetromino=le.bind(this),this.hardDrop=ae.bind(this),this.handleLines=ke.bind(this),this.canStep=()=>this.isValidPosition(this.changePosition(this.alive,0,1)),this.doStepLeft=()=>Ie(this,Te,"f").call(this,-1,0),this.doStepRight=()=>Ie(this,Te,"f").call(this,1,0),Te.set(this,((e,t)=>{const n=this.changePosition(this.alive,e,t);this.isValidPosition(n)&&(this.alive=n,W(this.alive),0!==e&&this.updateGhost())})),this.changePosition=L.bind(this),this.isValidPosition=I.bind(this),Le.set(this,Se.init((()=>this.alive),this.isValidPosition,Ce.htmlElem))}clear(){Ce.htmlElem.innerHTML=""}updateGhost(){z.ghostEnabled&&Ie(this,Le,"f").update()}}Ce=Pe,Te=new WeakMap,Le=new WeakMap,Pe.htmlElem=document.querySelector("#field");var Me,Ae=function(e,t,n,o){if("a"===n&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?o:"a"===n?o.call(e):o?o.value:t.get(e)};Me=new WeakMap;const Be=new class{constructor(){Me.set(this,document.querySelector("#next"))}show(){const e=B(D.getNext(),!0);this.clear(),N(e,Ae(this,Me,"f")),function(e){requestAnimationFrame((()=>{const t=9===P[e[0].n.n].length?12.5:0,n=0==e[0].n.n?-25:0;e.forEach((e=>{e.elem.style.left=25*e.x+t+"%",e.elem.style.top=50*e.y-50+n+"%"}))}))}(e)}clear(){Ae(this,Me,"f").innerHTML=""}},Ue=new class{constructor(){this.elem=document.querySelector("#time"),this.startTime=0,this.pauseTime=0,this.timeOut=0,this.stopped=!1}start(){this.stopped=!1,this.startTime=Date.now().valueOf(),this.update()}update(){if(this.stopped)return;let e=Date.now().valueOf()-this.startTime;this.elem.innerText=`${Math.floor(e/6e4)}:${Math.floor(e%6e4/1e3)}`,this.timeOut=setTimeout((()=>this.update()),1e3-e%1e3)}stop(){this.stopped=!0,clearTimeout(this.timeOut)}pause(){this.stopped=!0,this.pauseTime=Date.now().valueOf(),clearTimeout(this.timeOut)}resume(){this.startTime+=Date.now().valueOf()-this.pauseTime,this.stopped=!1,this.update()}};function ze(e){const t=function(e){return{aPressed:!1,dPressed:!1,timeOut:void 0,aDown(){this.aPressed||(this.aPressed=!0,e.doStepLeft(),this.timeOut=setTimeout((()=>this.checkIfPressed()),250))},dDown(){this.dPressed||(this.dPressed=!0,e.doStepRight(),this.timeOut=setTimeout((()=>this.checkIfPressed()),250))},aUp(){this.aPressed=!1,clearTimeout(this.timeOut)},dUp(){this.dPressed=!1,clearTimeout(this.timeOut)},checkIfPressed(){(this.aPressed||this.dPressed)&&(this.timeOut=setTimeout((()=>this.checkIfPressed()),50)),this.aPressed&&e.doStepLeft(),this.dPressed&&e.doStepRight()}}}(e);return[["down","ArrowDown",()=>e.hardDrop()],["down","KeyS",()=>e.hardDrop()],["down","ArrowUp",()=>e.rotateTetromino()],["down","KeyW",()=>e.rotateTetromino()],["down","ArrowLeft",()=>t.aDown()],["down","KeyA",()=>t.aDown()],["down","ArrowRight",()=>t.dDown()],["down","KeyD",()=>t.dDown()],["up","ArrowLeft",()=>t.aUp()],["up","KeyA",()=>t.aUp()],["up","ArrowRight",()=>t.dUp()],["up","KeyD",()=>t.dUp()]]}const $e={callbacks:{swipeup:[],swipedown:[],swipeleft:[],swiperight:[],touchend:[]},init(e){e.addEventListener("touchstart",(e=>this.handleStart(e))),e.addEventListener("touchmove",(e=>this.handleMove(e))),e.addEventListener("touchend",(e=>this.handleEnd(e)))},handleStart(e){this.detectSwipe.startPoint={x:e.touches[0].screenX,y:e.touches[0].screenY,time:e.timeStamp}},handleMove(e){this.detectSwipe(e.touches[0].screenX,e.touches[0].screenY,e.timeStamp)},handleEnd(e){this.callbacks.touchend.forEach((e=>e()))},detectSwipe(e,t,n){const o=this.detectSwipe.startPoint,i=Math.abs;var r,s,a,l,c=e-o.x,d=t-o.y,h=i(c)>i(d)&&(c>0?"swiperight":"swipeleft")||(d>0?"swipedown":"swipeup"),p=(r=o.x,s=o.y,a=e,l=t,Math.sqrt(Math.pow(a-r,2)+Math.pow(l-s,2))/(window.screen.width/100)>5);return p&&this.callbacks[h].forEach((e=>e())),p},register(e,t){this.callbacks[e].push(t)},unregister(e,t){console.log(this.callbacks[e].indexOf(t)),this.callbacks[e].splice(this.callbacks[e].indexOf(t),1)}};var Ve;function Oe(){"visible"===document.visibilityState?(G.resume("music"),ne.start(),Ue.resume()):(G.pause("music"),ne.stop(),Ue.pause())}function qe(e){e.style.background="rgb(32,0,0)",e.style.boxShadow="none"}function Ze(){return 100+400**((100-1.1*ge.current)/100)}function Re(){const e=1+2*Math.min(z.volumeBalance-.5,0),t=1-2*Math.max(z.volumeBalance-.5,0);G.setMusicVolume(e),G.setFXVolume(t)}function He(){G.setSumVolume(z.volume*z.isNotMuted)}function De(){He(),Re()}function Ne(){document.querySelector("body").className="bodyBlue",document.querySelector("#info").classList.remove("hide"),document.querySelector("#info").classList.remove("hideNext"),document.querySelector("#info").classList.add("smallInfo"),document.querySelector("#restart").classList.add("hide"),document.querySelector("#field").removeEventListener("click",Ne),document.addEventListener("visibilitychange",Oe),D.create();const e=new Pe;e.clear(),e.emitTetromino(),se.register(ze(e)),function(){var e,t=e=>document.dispatchEvent(e),n=e=>({down:new KeyboardEvent(`key${e}`,{code:"ArrowDown"}),up:new KeyboardEvent(`key${e}`,{code:"ArrowUp"}),left:new KeyboardEvent(`key${e}`,{code:"ArrowLeft"}),right:new KeyboardEvent(`key${e}`,{code:"ArrowRight"})}),o=()=>{l("down")},i=()=>{l("up")},r=()=>{l("left")},s=()=>{l("right")},a=()=>{l("end")};function l(o){var i=!e&&"end"==o;i&&t(n("down").up),e&&"end"!==o||i||("end"==o?(t(n("up")[e]),e=void 0):(t(n("down")[o]),e=o))}$e.register("swipedown",o),$e.register("swipeup",i),$e.register("swipeleft",r),$e.register("swiperight",s),$e.register("touchend",a),Ve=()=>{$e.unregister("swipedown",o),$e.unregister("swipeup",i),$e.unregister("swipeleft",r),$e.unregister("swiperight",s),$e.unregister("touchend",a),e=void 0}}();const t=function(e){return function(){e.canStep()?e.doStepDown():(e.placeTetromino(),e.handleLines(),e.isOverflowed?function(e){ne.stop(),Ue.stop(),document.removeEventListener("visibilitychange",Oe),document.querySelector("body").className="bodyRed",document.querySelector("#info").classList.remove("smallInfo"),document.querySelector("#info").classList.add("hideNext"),document.querySelector("#restart").classList.remove("hide"),document.querySelector("#field").addEventListener("click",Ne),Be.clear(),G.play("end"),G.stop("music"),se.unRegister(ze(e)),Ve(),[...document.getElementById("field").children].forEach(qe)}(e):(e.emitTetromino(),Be.show()))}}(e);ge.newCount(),xe.new(),Be.show(),ne.setCallback(t),ne.setTickGettingFunction(Ze),ne.start(),Ue.start(),G.initAudio(),De(),G.stop("end"),G.repeatPlay("music")}var We=Math.round;function je(e,t,n){var o=(n/=100)*(t/=100),i=e/60,r=o*(1-Math.abs(i%2-1)),s=n-o,a=parseInt(i.toString(),10),l=0===a?[o,r,0]:1===a?[r,o,0]:2===a?[0,o,r]:3===a?[0,r,o]:4===a?[r,0,o]:5===a?[o,0,r]:[];return[We(255*(l[0]+s)),We(255*(l[1]+s)),We(255*(l[2]+s))]}function Fe(e){return`#${(e[0]>>4).toString(16)}${(e[0]%16).toString(16)}${(e[1]>>4).toString(16)}${(e[1]%16).toString(16)}${(e[2]>>4).toString(16)}${(e[2]%16).toString(16)}`}var Ke=Math.round;function Ge(e){var t,[n,o,i]=e,r=Math.max(n,o,i),s=r-Math.min(n,o,i);return 0===s?t=0:n===r?t=(o-i)/s%6:o===r?t=(i-n)/s+2:i===r&&(t=(n-o)/s+4),(t=Ke(60*t))<0&&(t+=360),[t,Ke(100*(0===r?0:s/r)),Ke(r/255*100)]}var Xe,Ye,_e,Je,Qe,et=function(e,t,n,o){if("a"===n&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?o:"a"===n?o.call(e):o?o.value:t.get(e)};class tt{constructor(e,t,n,o,i,r,s,a,l,c){Ye.add(this),this.colorlist=new Map;const d=et(this,Ye,"m",Je).call(this,n,o,i,r,s,a,l,c,t,e);_e.container.appendChild(function(e,t){let n=0,o=0,i=0,r=0,s=!1;function a(t){s&&window.requestAnimationFrame((function(){s&&(e.style.transform=`translate(${t.clientX-n+i}px,${t.clientY-o+r}px)`)}))}function l(e){s=!1,i=e.clientX-n+i,r=e.clientY-o+r,document.body.removeEventListener("mousemove",a),document.body.removeEventListener("mouseup",l)}return t.addEventListener("mousedown",(i=>{!function(i){Xe&&(Xe.style.zIndex="1",e.style.zIndex="2"),Xe=e,i.target===t&&(s=!0,n=i.clientX,o=i.clientY,document.body.addEventListener("mousemove",a),document.body.addEventListener("mouseup",l))}(i)})),e}(d,d))}}_e=tt,Ye=new WeakSet,Je=function(e,t,n,o,i,r,s,a,l,c){const d=document.createElement("div");d.classList.add("paletteEditor"),d.innerHTML=_e.template,d.querySelector(".edpalette").appendChild(et(this,Ye,"m",Qe).call(this,l,r,s)),d.querySelector(".paletteEditorTitle").innerText=c;const h=d.querySelector(".inputHue"),p=d.querySelector(".inputSat"),u=d.querySelector(".inputVal"),m=d.querySelector(".hexInput");return this.displayHue=e=>h.value=e.toString(),this.displaySaturation=e=>p.value=e.toString(),this.displayValue=e=>u.value=e.toString(),this.displayHex=e=>m.value=e,m.addEventListener("input",(()=>i(m.value))),p.addEventListener("input",(()=>n(p.value))),u.addEventListener("input",(()=>o(u.value))),h.addEventListener("input",(()=>t(h.value))),d.querySelector(".savePaletteButton").addEventListener("click",(()=>e())),d.querySelector(".closeIcon").addEventListener("click",(()=>d.remove())),d.querySelector(".addColorButton").addEventListener("click",(()=>a())),d},Qe=function(e,t,n){const o=document.createElement("div");function i(e,i){const r=document.createElement("div");r.classList.add("edpaletteColor");const s=document.createElement("div");s.innerText="remove",s.classList.add("colorRemoveButton"),r.style.background=`rgb(${e[0]},${e[1]},${e[2]})`,r.addEventListener("click",(()=>t(e))),s.addEventListener("click",(t=>{t.stopPropagation(),n(e)})),r.appendChild(s),o.appendChild(r),i.set(e,r)}return o.classList.add("edpaletteColorWrapper"),e.forEach((e=>i(e,this.colorlist))),this.addColor=e=>{i(e,this.colorlist)},this.removeColor=e=>{this.colorlist.get(e).remove(),this.colorlist.delete(e)},this.selectColor=e=>{this.selectedColorElem&&this.selectedColorElem.classList.remove("edcolorSelected"),this.colorlist.get(e).classList.add("edcolorSelected"),this.selectedColorElem=this.colorlist.get(e)},this.displayColor=e=>{this.selectedColorElem.style.background=`rgb(${e[0]},${e[1]},${e[2]})`},o},tt.container=document.getElementById("editorContainer"),tt.template='\n<div class="closeIcon settingsCloseIconSvg"></div>\n<span class="paletteEditorTitle"></span>\n<div class="edpalette"></div>\n<div class=\'addColorButton\'><button>add color</button></div>\n<div>\n  <span class="inputLabel">H</span>\n  <a title="hue"><input class=\'inputHue\' min=0 max=359 type=\'range\'></a>\n</div>\n<div>\n  <span class="inputLabel">S</span>\n  <a title="saturation"><input class=\'inputSat\' min=0 max=100 step=0.5 type=\'range\'></a>\n</div>\n<div>\n  <span class="inputLabel">V</span>\n  <a title="value"><input class=\'inputVal\' min=0 max=100 step=0.5 type=\'range\'></a>\n</div>\n<div>\n  <span class="hexInputLabel">hex</span>\n  <input type="text" class="hexInput" value="#29b369">\n</div>\n<div class=\'savePaletteButton\'><button>save</button></div>\n';var nt,ot,it,rt,st=function(e,t,n,o){if("a"===n&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?o:"a"===n?o.call(e):o?o.value:t.get(e)},at=function(e,t,n,o,i){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?i.call(e,n):i?i.value=n:t.set(e,n),n};class lt{constructor(e,t,n){nt.set(this,0),ot.set(this,void 0),it.set(this,void 0),rt.set(this,void 0),this.saveFunction=n,this.palette=e,this.UI=new tt(t,this.palette,this.save.bind(this),this.inputHue.bind(this),this.inputSaturation.bind(this),this.inputValue.bind(this),this.inputHex.bind(this),this.selectColor.bind(this),this.removeColor.bind(this),this.addColor.bind(this)),this.selectColor(this.palette[0])}get selectedColor(){return this.palette[st(this,nt,"f")]}set selectedColor(e){e.forEach(((e,t)=>{this.palette[st(this,nt,"f")][t]=e}))}inputHue(e){at(this,ot,parseInt(e),"f"),this.selectedColor=je(parseInt(e),st(this,it,"f"),st(this,rt,"f")),this.UI.displayColor(this.selectedColor),this.UI.displayHex(Fe(this.selectedColor))}inputSaturation(e){at(this,it,parseInt(e),"f"),this.selectedColor=je(st(this,ot,"f"),parseInt(e),st(this,rt,"f")),this.UI.displayColor(this.selectedColor),this.UI.displayHex(Fe(this.selectedColor))}inputValue(e){at(this,rt,parseInt(e),"f"),this.selectedColor=je(st(this,ot,"f"),st(this,it,"f"),parseInt(e)),this.UI.displayColor(this.selectedColor),this.UI.displayHex(Fe(this.selectedColor))}inputHex(e){this.selectedColor=function(e){const t=e.length;return[parseInt(e.charAt(t-6).concat(e.charAt(t-5)),16)||0,parseInt(e.charAt(t-4).concat(e.charAt(t-3)),16)||0,parseInt(e.charAt(t-2).concat(e.charAt(t-1)),16)||0]}(e);const t=Ge(this.selectedColor);at(this,ot,t[0],"f"),at(this,it,t[1],"f"),at(this,rt,t[2],"f"),this.UI.displayColor(this.selectedColor),this.UI.displayHue(t[0]),this.UI.displaySaturation(t[1]),this.UI.displayValue(t[2])}saveFunction(e){}save(){this.saveFunction(this.palette)}selectColor(e){at(this,nt,this.palette.indexOf(e),"f"),this.UI.displayHex(Fe(this.selectedColor));const t=Ge(this.selectedColor);at(this,ot,t[0],"f"),at(this,it,t[1],"f"),at(this,rt,t[2],"f"),this.UI.displayHue(t[0]),this.UI.displaySaturation(t[1]),this.UI.displayValue(t[2]),this.UI.selectColor(e)}removeColor(e){this.palette.splice(this.palette.indexOf(e),1),this.UI.removeColor(e),0==this.palette.length&&this.addColor()}addColor(){const e=()=>Math.floor(256*Math.random()),t=[e(),e(),e()];this.palette.push(t),this.UI.addColor(t)}}let ct,dt;function ht(e,t){const n=document.createElement("div");n.classList.add("palette");const o=document.createElement("div");o.classList.add("paletteColorWrapper");const i=document.createElement("span");if(i.classList.add("paletteOptions"),e.forEach((e=>{const t=document.createElement("div");t.classList.add("paletteColor"),t.style.background=`rgb(${e[0]},${e[1]},${e[2]})`,o.appendChild(t)})),"default"!==t){const e=document.createElement("span"),o=document.createElement("span");e.innerText="edit ",o.innerText="remove",e.addEventListener("click",(()=>{!function(e){!function(e){new lt(O.get(e),"edit palette",(t=>{O.replace(e,t),pt()}))}(e)}(t)})),o.addEventListener("click",(()=>{n.remove(),O.remove(t),t==z.currentPalette&&(z.currentPalette="default",dt.classList.add("paletteSelected"),ct=dt)})),i.appendChild(e),i.appendChild(o)}else dt=n;return t===z.currentPalette&&(n.classList.add("paletteSelected"),ct=n),o.addEventListener("click",(e=>{z.currentPalette=t,n.classList.add("paletteSelected"),ct.classList.remove("paletteSelected"),ct=n})),n.appendChild(o),n.appendChild(i),n}function pt(){const e=document.getElementById("paletteList");let t;for(t in e.innerHTML="",O.palettes)e.appendChild(ht(O.palettes[t],t))}nt=new WeakMap,ot=new WeakMap,it=new WeakMap,rt=new WeakMap;const ut=document.querySelector("#settings"),mt={icon:document.querySelector("#settingsIcon"),inner:document.querySelector("#settingsInner"),opened:!1,toggle(){this.opened?this.close():this.open(),this.opened=!this.opened},open(){ut.className="settingsOpen",ft.opacity(1),this.icon.className="settingsCloseIconSvg",this.inner.style.display="block"},close(){ut.className="settingsClose",ft.opacity(0),this.icon.className="settingsIconSvg",this.inner.style.display="none"}},ft={icon:document.querySelector("#soundIcon"),muted:!1,toggle(){this.muted=!this.muted,this.setIcon();const e=this.muted?0:1;z.isNotMuted=e,G.isInited&&De()},opacity(e){this.icon.style.opacity=e?"0":"100"},setState(){this.muted=!z.isNotMuted,this.setIcon()},setIcon(){this.icon.className=this.muted?"volumeMuteIconSvg":"volumeIconSvg"}},bt={mainVolumeElem:document.getElementById("inputMainVolume"),volumeBalanceElem:document.getElementById("inputVolumeBalance"),init(){this.mainVolumeElem.value=z.volume,this.volumeBalanceElem.value=z.volumeBalance,this.mainVolumeElem.addEventListener("input",(()=>{z.volume=this.mainVolumeElem.value,He()})),this.volumeBalanceElem.addEventListener("input",(()=>{z.volumeBalance=this.volumeBalanceElem.value,Re()}))}},vt={inputElem:document.getElementById("inputBackgroundTheme"),styleElem:document.createElement("style"),themes:["--bg-color:rgb(60,60,60);--brdr-color:rgba(150,150,150,0.5);","--bg-color:rgb(60,60,90);--brdr-color:rgba(150,150,200,0.5);"],init(){this.inputElem.value=z.backgroundColor,document.body.append(this.styleElem),this.inputElem.addEventListener("input",(()=>this.set())),this.set()},set(){const e=0==this.inputElem.value?0:1;this.styleElem.innerHTML=":root{"+this.themes[e]+"}",z.backgroundColor=e}},gt={elem:document.getElementById("addButton"),init(){this.elem.addEventListener("click",(()=>{new lt([[150,50,50],[50,150,50],[50,50,150]],"create palette",(e=>{O.add(e),pt()}))}))}},wt={elem:document.getElementById("inputGhost"),init(){this.elem.addEventListener("change",(()=>this.set()));const e=z.ghostEnabled?1:0;this.elem.value=e,Se.setAppearance(e)},set(){const e=0==this.elem.value?0:1;z.ghostEnabled=e,Se.setAppearance(e)}};se.init(),se.register([["down","Enter",()=>Ne()]]),$e.init(Pe.htmlElem),ue.read(),ue.setValue(),document.getElementById("start").addEventListener("click",Ne),document.getElementById("restart").addEventListener("click",Ne),mt.icon.addEventListener("click",mt.toggle.bind(mt)),ft.icon.addEventListener("click",ft.toggle.bind(ft)),bt.init(),vt.init(),ft.setState(),pt(),gt.init(),wt.init()})()})();