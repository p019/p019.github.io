const cacheName="TetCache_V1.0";async function cacheFirst(e){const a=await caches.match(e);if(a)return writeCache(e,void 0),a;try{let a=await fetch(e.url);return writeCache(e,a.clone()),a}catch(e){console.log(e)}}async function writeCache(e,a){if((a||"audio"!==e.destination)&&(self.isStandalone||"audio"!==e.destination))try{a||(a=await fetch(e.url)),a&&a.ok&&(await caches.open(cacheName)).put(e,a)}catch(e){console.log(e)}}self.isStandalone=!1,addEventListener("message",(e=>{self.isStandalone="isStandalone"in e.data&&e.data.isStandalone})),self.addEventListener("fetch",(e=>{e.respondWith(cacheFirst(e.request))})),self.addEventListener("activate",(async e=>{const a=await caches.keys();await Promise.all(a.filter((e=>e!=cacheName)).map((e=>caches.delete(e))))}));